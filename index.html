<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Кандидат-студентска кампания</title>

  <link href="https://fonts.googleapis.com/css?family=Roboto&amp;subset=cyrillic-ext" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous">
  <link href="./public_html/css/styles.css" rel="stylesheet" />

  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
  <script src="./public_html/js/loader.js"></script>
  <script src="./public_html/js/config.js"></script>

  <script src="./public_html/js/components/candidate-form.js"></script>
  <script src="./public_html/js/components/speciality-ranking.js"></script>
  <script src="./public_html/js/components/speciality-edit.js"></script>
  <script src="./public_html/js/components/login.js"></script>
  <script src="./public_html/js/components/user-menu.js"></script>

</head>

<body>
  <div id="app">
    <component :is="currentRoute" v-on:login="loginHandler" v-on:logout="logoutHandler" v-on:route="routing"></component>
    <component is="user-menu" v-on:logout="logoutHandler" v-if="user.isLogged" v-bind:user="user" v-on:route="routing"></component>
  </div>

  <script>
    new Vue({
      el: '#app',
      data: {
        user: {
          name: null,
          isLogged: false,
          isAdmin: false
        },
        currentRoute: 'login'
      },
      methods: {
        loginHandler: function (user) {
          this.user.name = user.name;
          this.user.isLogged = true;
          this.user.isAdmin = user.isAdmin;
          this.currentRoute = 'speciality-ranking';
        },
        logoutHandler: function () {
          this.user.name = null;
          this.user.isLogged = false;
          this.user.isAdmin = false;
          this.currentRoute = 'login';
        },
        routing: function (route) {
          this.currentRoute = route;
        }
      }
    });
  </script>
</body>

</html>